<h1 class="logo z-[999] flex w-[100%] justify-between">
    <a class="duration-300 hover:scale-125 hover:text-black" href="index.html"> Fridger </a>
</h1>

<div class="my-24 flex justify-center">
    <mat-stepper class="w-[70%]" #stepper linear>
        <mat-step label="Recipe info" [completed]="recipeForm?.formGroup?.valid">
            <app-dynamic-form
                #recipeForm
                flexDirection="vertical"
                [fields]="recipeFields"
                [buttons]="[]"></app-dynamic-form>
            <div>
                <button mat-button matStepperNext>Next</button>
            </div>
        </mat-step>
        <mat-step label="Fill out ingredients" [completed]="ingredientsForm?.formGroup?.valid">
            <app-dynamic-form #ingredientsForm [fields]="ingredientsFields" [buttons]="[]"></app-dynamic-form>
            <div>
                <button mat-button matStepperPrevious>Back</button>
                <button mat-button matStepperNext>Next</button>
            </div>
        </mat-step>
        <mat-step label="Instructions" [completed]="instructionsForm?.formGroup?.valid">
            <app-dynamic-form
                #instructionsForm
                flexDirection="vertical"
                [fields]="instructionsFields"
                [buttons]="[]"></app-dynamic-form>
            <div>
                <button mat-button matStepperPrevious>Back</button>
                <button mat-button matStepperNext>Next</button>
            </div>
        </mat-step>
        <mat-step>
            <ng-template matStepLabel>Done</ng-template>
            <p>You are now done.</p>

            <div class="flex justify-between">
                <section>
                    <h2>Recipe</h2>
                    <p>name: {{ recipeForm?.formGroup?.get('name')?.value }}</p>
                    <p>description: {{ recipeForm?.formGroup?.get('description')?.value }}</p>
                    <p>link: {{ recipeForm?.formGroup?.get('link')?.value }}</p>
                    <p>image url: {{ recipeForm?.formGroup?.get('imageUrl')?.value }}</p>
                    <p>is favorite: {{ recipeForm?.formGroup?.get('favorite')?.value }}</p>
                </section>

                <section>
                    <h2>Ingredients</h2>
                    @for (ingr of recipeIngredients?.controls; track ingr; let i = $index) {
                    <p>
                        {{ i + 1 }}. {{ ingr.get('ingredient')?.get('name')?.value }} {{ ingr.get('quantity')?.value }}
                        {{ ingr.get('unit')?.value }}
                    </p>
                    }
                </section>
                <section>
                    <h2>Instructions</h2>
                    <div>{{ instructionsForm?.formGroup?.get('instructions')?.value }}</div>
                </section>
            </div>
            <div class="mt-4">
                <button mat-button matStepperPrevious>Back</button>
                <button mat-button (click)="stepper.reset()">Reset</button>
                <button mat-button (click)="onDone()">Done</button>
            </div>
        </mat-step>
    </mat-stepper>
</div>
